# PRJ_PRICING — Управление ценами и репрайсинг

Проект для анализа ценовой эластичности, оптимизации цен и репрайсинга товаров на маркетплейсах.

## Структура

```
PRJ_PRICING/
├── README.md                 # Этот файл
├── price_elasticity.py       # Скрипт анализа эластичности
├── reports/                  # Результаты анализа (графики PNG)
└── mpmgr/                   # Документация по репрайсеру MP Manager
    └── README.md             # Подключение, стратегии, настройки
```

## Быстрый старт

### Запуск анализа эластичности

```bash
# По умолчанию — данные из PRJ_MARKETPLACE/sales_data_v1.0.xlsx
uv run --with openpyxl --with matplotlib PRJ_PRICING/price_elasticity.py

# Свой файл данных
uv run --with openpyxl --with matplotlib PRJ_PRICING/price_elasticity.py путь/к/файлу.xlsx
```

### Или через скилл Claude Code

```
/price-elasticity
```

Claude сам найдёт данные, посчитает и выдаст анализ с графиками.

## Формат входных данных

Excel-файл (.xlsx) с двумя листами:

**Лист "Каталог"** (опционально, для расчёта маржи):

| SKU | Название | Категория | Себестоимость, ₽ | ... |
|-----|----------|-----------|------------------|-----|

**Лист "Продажи"** (обязательно):

| Неделя | SKU | Название | Категория | Площадка | Продажи, шт | Цена, ₽ | ... |
|--------|-----|----------|-----------|----------|-------------|---------|-----|

Минимальное требование: один SKU должен продаваться по 2+ разным ценам (разные площадки, акции, изменения цен).

## Что считает скрипт

### Эластичность спроса по цене

```
E = (ΔQ / Q̄) / (ΔP / P̄)    — метод средней точки (arc elasticity)
```

| E | Тип | Что значит |
|---|-----|------------|
| E < -1 | Эластичный | Снижение цены → выручка растёт. Выгодно снижать |
| -1 < E < -0.5 | Единичная эластичность | Пограничная зона |
| E > -0.5 | Неэластичный | Цена мало влияет на объём. Можно повышать |

### Целевая цена для удвоения объёма

Используется log-linear модель спроса: `Q = e^a × P^E`

Калибруется по реальным данным продаж и вычисляет, какая цена нужна для 2× текущего объёма.

## Выходные графики (reports/)

| Файл | Что показывает |
|------|----------------|
| `01_elasticity_all_skus.png` | Эластичность по всем SKU (горизонтальный барчарт) |
| `02_elasticity_by_category.png` | Средняя эластичность по категориям с разбросом |
| `03_price_vs_qty_top12.png` | Scatter: цена vs продажи для ТОП-12 товаров |
| `04_demand_curves_multi_price.png` | Кривые спроса для товаров с 3+ ценовыми уровнями |
| `05_price_vs_demand_change.png` | Матрица: ΔЦена% vs ΔОбъём% (все SKU) |

## Ограничения

- Модель экстраполирует за пределы наблюдённых цен — при глубоких скидках реальная эластичность может отличаться
- Сезонность и акции влияют на продажи помимо цены — это шум в данных
- Рекомендация: тестировать изменение цены поэтапно (5-10% за шаг), замерять результат

## Связанные ресурсы

- [REF: PRJ_MARKETPLACE/sales_data_v1.0.xlsx] — основной источник данных
- [REF: .claude/skills/price-elasticity/] — скилл для Claude Code
- [REF: PRJ_PRICING/mpmgr/README.md] — документация по репрайсеру MP Manager (подключение, стратегии, API)
